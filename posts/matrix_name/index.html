<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>行列変数のネーミングについて</title>
	
	
	<link rel="stylesheet" href="/css/style.css">
	
</head>
<body>
	<header>
	=================<br>
	== <a href="https://liliilli.github.io">neuromantic</a> ==<br>
	=================
	<div style="float: right;"></div><br>
	<p>
	<nav>
			<a href="/"><b>Start</b></a>.
			
			
			<a href="/posts/"><b>Posts</b></a>.
			
			<a href="/about-hugo/"><b>About</b></a>.
			
	</nav>
	</p>
	
</header>

	
	<main>
		<article>
			<h1>行列変数のネーミングについて</h1>
			<b><time>13.03.2020 13:11</time></b>
		       
		           <a href="/tags/untagged">untagged</a>
        	       

			<div>
				<p><a href="https://www.sebastiansylvan.com/post/matrix_naming_convention/">https://www.sebastiansylvan.com/post/matrix_naming_convention/</a></p>

<p>D3Dスタイル（Row-Major、左から右へ演算していくスタイル）でやると、</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">vector4_t</span> <span class="n">transformed_point</span> <span class="o">=</span> <span class="n">point</span> <span class="o">*</span> <span class="n">M</span> <span class="o">*</span> <span class="n">A</span><span class="p">;</span>
</code></pre></div>
<p>が普通だけど、このままじゃ後でまた見る時に何をしているかが分からないかもしれない。</p>

<p>なので、お勧めしている変数名の書き方としては、<code>foo_to_bar</code>または<code>bar_from_too</code>（これはOpenGLかVulkan系列）みたいに座標空間から別の座標空間の名前を書くのが良いらしい。例えば、<code>world_to_view</code>または<code>view_to_projection</code>みたいな…<code>transform_matrix</code>のような名前よりは全然意味がわかるようになってる。</p>

<p>ということで、お勧めした変数ネーミングスタイルで例を書いてみると、</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">const</span> <span class="n">matrix4_t</span> <span class="n">object_to_view</span> <span class="o">=</span> <span class="n">object_to_world</span> <span class="o">*</span> <span class="n">world_to_view</span><span class="p">;</span>
<span class="k">const</span> <span class="n">matrix4_t</span> <span class="n">object_to_proj</span> <span class="o">=</span> <span class="n">object_to_view</span> <span class="o">*</span> <span class="n">view_to_proj</span><span class="p">;</span>

<span class="k">const</span> <span class="n">vector4_t</span> <span class="n">point_in_proj</span> <span class="o">=</span> <span class="n">point</span> <span class="o">*</span> <span class="n">object_to_proj</span><span class="p">;</span>
</code></pre></div>
<p>逆行列の場合には、単純に前の座標空間と後ろの座標空間の名前を書き換えることだけ。</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">const</span> <span class="n">matrix4_t</span> <span class="n">view_to_object</span> <span class="o">=</span> <span class="p">(</span><span class="n">object_to_world</span> <span class="o">*</span> <span class="n">world_to_view</span><span class="p">).</span><span class="n">to_inverse</span><span class="p">();</span>

<span class="k">const</span> <span class="n">matrix4_t</span> <span class="n">head_to_right_hand</span> <span class="o">=</span> <span class="n">rigth_hand_to_head</span><span class="p">.</span><span class="n">to_inverse</span><span class="p">();</span>
<span class="k">const</span> <span class="n">matrix4_t</span> <span class="n">object_to_right_hand</span> <span class="o">=</span> 
    <span class="n">object_to_world</span> <span class="o">*</span> <span class="n">world_to_head</span> <span class="o">*</span> <span class="n">head_to_right_hand</span><span class="p">;</span>
</code></pre></div>
<p>OpenGLでは、<code>to</code>の代わりに<code>from</code>を使い、そして演算の手順に沿って逆に書く。</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="k">const</span> <span class="n">matrix4_t</span> <span class="n">proj_from_object</span> <span class="o">=</span> 
    <span class="n">proj_from_view</span> <span class="o">*</span> <span class="n">view_from_world</span> <span class="o">*</span> <span class="n">world_from_object</span><span class="p">;</span>
</code></pre></div>
			</div>
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/shader_opti_memo_2/">Low-level shader optimization for next-gen and D3D11のメモ</a></li>
				
				<li><a href="/posts/sfinae_afaid/">SFINAEの活用、ざっくりメモ</a></li>
				
				<li><a href="/posts/shader_opti_memo/">Low Level Thinking in High Shader Languages</a></li>
				
				<li><a href="/posts/dinput8/">DirectInput8 導入メモ</a></li>
				
				<li><a href="/posts/tlsf_basic/">TLSF Allocatorを作ってみた</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2020 <a href="https://liliilli.github.io"><b>neuromantic</b></a>.
	<a href="https://github.com/liliilli"><b>Github</b></a>.
	<a href="https://twitter.com/NeuliliilliD"><b>Twitter</b></a>.
	</p>
</footer>

</body>
</html>
